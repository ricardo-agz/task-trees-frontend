{"ast":null,"code":"import { GOBACK, SELECTCHILD, SETCURRNODE, SETSEARCH } from \"../Types\";\nimport { TestData } from \"../TestData\";\n\nconst data = require('../para_step_goal_links_gold.json');\n\nconst initialState = {\n  currNode: null,\n  prevNodeStack: [],\n  graphData: TestData,\n  data: JSON.parse(data)\n};\n\nconst graphReducer = (state = initialState, action) => {\n  function isGoal(string) {\n    let words = string.split(\" \");\n    let allCaps = true;\n  }\n\n  function bfs(search) {\n    let queue = [];\n\n    for (let i = 0; i < state.graphData.length; i++) {\n      queue.push(state.graphData[i]);\n    }\n\n    let runs = 0;\n\n    while (queue.length > 0 && runs < 50) {\n      let v = queue.shift();\n\n      if (v.goal === search) {\n        return v;\n      } else {\n        for (let i = 0; i < v.steps.length; i++) {\n          queue.push(v.steps[i]);\n        }\n      }\n\n      runs++;\n    }\n\n    return null;\n  }\n\n  switch (action.type) {\n    case GOBACK:\n      return { ...state,\n        currNode: state.prevNodeStack[state.prevNodeStack.length - 1],\n        prevNodeStack: state.prevNodeStack.slice(0, state.prevNodeStack.length - 1)\n      };\n\n    case SELECTCHILD:\n      return { ...state,\n        prevNodeStack: state.prevNodeStack.concat(state.currNode),\n        currNode: state.currNode.steps[action.data]\n      };\n\n    case SETCURRNODE:\n      // console.log(\"bfs out: \" + bfs(action.data))\n      console.log(state.data.entries.length);\n      return { ...state,\n        prevNode: null,\n        currNode: bfs(action.data)\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default graphReducer;","map":{"version":3,"sources":["C:/Users/Ricky/Desktop/School/Research/NLP/WikiHow/visualizer/src/application/reducers/GraphReducer.js"],"names":["GOBACK","SELECTCHILD","SETCURRNODE","SETSEARCH","TestData","data","require","initialState","currNode","prevNodeStack","graphData","JSON","parse","graphReducer","state","action","isGoal","string","words","split","allCaps","bfs","search","queue","i","length","push","runs","v","shift","goal","steps","type","slice","concat","console","log","entries","prevNode"],"mappings":"AAAA,SAAQA,MAAR,EAAgBC,WAAhB,EAA6BC,WAA7B,EAA0CC,SAA1C,QAA0D,UAA1D;AACA,SAAQC,QAAR,QAAuB,aAAvB;;AACA,MAAMC,IAAI,GAAGC,OAAO,CAAC,mCAAD,CAApB;;AAEA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,QAAQ,EAAE,IADS;AAEnBC,EAAAA,aAAa,EAAE,EAFI;AAGnBC,EAAAA,SAAS,EAAEN,QAHQ;AAInBC,EAAAA,IAAI,EAAEM,IAAI,CAACC,KAAL,CAAWP,IAAX;AAJa,CAArB;;AAOA,MAAMQ,YAAY,GAAG,CAACC,KAAK,GAAGP,YAAT,EAAuBQ,MAAvB,KAAkC;AACrD,WAASC,MAAT,CAAgBC,MAAhB,EAAwB;AACtB,QAAIC,KAAK,GAAGD,MAAM,CAACE,KAAP,CAAa,GAAb,CAAZ;AACA,QAAIC,OAAO,GAAG,IAAd;AAED;;AAED,WAASC,GAAT,CAAaC,MAAb,EAAqB;AACnB,QAAIC,KAAK,GAAG,EAAZ;;AAEA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGV,KAAK,CAACJ,SAAN,CAAgBe,MAApC,EAA4CD,CAAC,EAA7C,EAAiD;AAC/CD,MAAAA,KAAK,CAACG,IAAN,CAAWZ,KAAK,CAACJ,SAAN,CAAgBc,CAAhB,CAAX;AACD;;AAED,QAAIG,IAAI,GAAG,CAAX;;AACA,WAAOJ,KAAK,CAACE,MAAN,GAAe,CAAf,IAAoBE,IAAI,GAAG,EAAlC,EAAsC;AACpC,UAAIC,CAAC,GAAGL,KAAK,CAACM,KAAN,EAAR;;AACA,UAAID,CAAC,CAACE,IAAF,KAAWR,MAAf,EAAuB;AACrB,eAAOM,CAAP;AACD,OAFD,MAEO;AACL,aAAK,IAAIJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGI,CAAC,CAACG,KAAF,CAAQN,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;AACvCD,UAAAA,KAAK,CAACG,IAAN,CAAWE,CAAC,CAACG,KAAF,CAAQP,CAAR,CAAX;AACD;AACF;;AACDG,MAAAA,IAAI;AACL;;AAED,WAAO,IAAP;AACD;;AAED,UAAQZ,MAAM,CAACiB,IAAf;AACE,SAAKhC,MAAL;AACE,aAAO,EACL,GAAGc,KADE;AAELN,QAAAA,QAAQ,EAAEM,KAAK,CAACL,aAAN,CAAoBK,KAAK,CAACL,aAAN,CAAoBgB,MAApB,GAA6B,CAAjD,CAFL;AAGLhB,QAAAA,aAAa,EAAEK,KAAK,CAACL,aAAN,CAAoBwB,KAApB,CAA0B,CAA1B,EAA6BnB,KAAK,CAACL,aAAN,CAAoBgB,MAApB,GAA6B,CAA1D;AAHV,OAAP;;AAKF,SAAKxB,WAAL;AACE,aAAO,EACL,GAAGa,KADE;AAELL,QAAAA,aAAa,EAAEK,KAAK,CAACL,aAAN,CAAoByB,MAApB,CAA2BpB,KAAK,CAACN,QAAjC,CAFV;AAGLA,QAAAA,QAAQ,EAAEM,KAAK,CAACN,QAAN,CAAeuB,KAAf,CAAqBhB,MAAM,CAACV,IAA5B;AAHL,OAAP;;AAKF,SAAKH,WAAL;AACE;AACAiC,MAAAA,OAAO,CAACC,GAAR,CAAYtB,KAAK,CAACT,IAAN,CAAWgC,OAAX,CAAmBZ,MAA/B;AACA,aAAO,EACL,GAAGX,KADE;AAELwB,QAAAA,QAAQ,EAAE,IAFL;AAGL9B,QAAAA,QAAQ,EAAEa,GAAG,CAACN,MAAM,CAACV,IAAR;AAHR,OAAP;;AAKF;AACE,aAAOS,KAAP;AAtBJ;AAwBD,CAtDD;;AAwDA,eAAeD,YAAf","sourcesContent":["import {GOBACK, SELECTCHILD, SETCURRNODE, SETSEARCH} from \"../Types\";\r\nimport {TestData} from \"../TestData\";\r\nconst data = require('../para_step_goal_links_gold.json');\r\n\r\nconst initialState = {\r\n  currNode: null,\r\n  prevNodeStack: [],\r\n  graphData: TestData,\r\n  data: JSON.parse(data)\r\n}\r\n\r\nconst graphReducer = (state = initialState, action) => {\r\n  function isGoal(string) {\r\n    let words = string.split(\" \");\r\n    let allCaps = true;\r\n\r\n  }\r\n\r\n  function bfs(search) {\r\n    let queue = [];\r\n\r\n    for (let i = 0; i < state.graphData.length; i++) {\r\n      queue.push(state.graphData[i]);\r\n    }\r\n\r\n    let runs = 0;\r\n    while (queue.length > 0 && runs < 50) {\r\n      let v = queue.shift()\r\n      if (v.goal === search) {\r\n        return v;\r\n      } else {\r\n        for (let i = 0; i < v.steps.length; i++) {\r\n          queue.push(v.steps[i])\r\n        }\r\n      }\r\n      runs++\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  switch (action.type) {\r\n    case GOBACK:\r\n      return {\r\n        ...state,\r\n        currNode: state.prevNodeStack[state.prevNodeStack.length - 1],\r\n        prevNodeStack: state.prevNodeStack.slice(0, state.prevNodeStack.length - 1)\r\n      }\r\n    case SELECTCHILD:\r\n      return {\r\n        ...state,\r\n        prevNodeStack: state.prevNodeStack.concat(state.currNode),\r\n        currNode: state.currNode.steps[action.data]\r\n      }\r\n    case SETCURRNODE:\r\n      // console.log(\"bfs out: \" + bfs(action.data))\r\n      console.log(state.data.entries.length)\r\n      return {\r\n        ...state,\r\n        prevNode: null,\r\n        currNode: bfs(action.data)\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default graphReducer\r\n"]},"metadata":{},"sourceType":"module"}